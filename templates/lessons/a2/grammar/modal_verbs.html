{% extends "layout.html" %}

{% block title %}DeutschLernHub - Modal Verbs{% endblock %}

{% block content %}
<div class="lesson-header a2-header">
    <div class="container">
        <h1>Modal Verbs</h1>
        <p class="lead">Learn modal verbs (können, müssen, wollen, etc.)</p>
        <div class="badge bg-light text-dark">25 min</div>
    </div>
</div>

<div class="container mt-4">
    <div class="row">
        <div class="col-md-3 mb-4">
            <div class="list-group">
                <a href="#overview" class="list-group-item list-group-item-action">Overview</a>
                <a href="#modal-verbs-list" class="list-group-item list-group-item-action">Modal Verbs List</a>
                <a href="#conjugation" class="list-group-item list-group-item-action">Conjugation</a>
                <a href="#word-order" class="list-group-item list-group-item-action">Word Order</a>
                <a href="#past-tense" class="list-group-item list-group-item-action">Past Tense</a>
                <a href="#usage-examples" class="list-group-item list-group-item-action">Usage Examples</a>
                <a href="#practice" class="list-group-item list-group-item-action">Practice</a>
            </div>
            
            <div class="card mt-4">
                <div class="card-body">
                    <h5 class="card-title">Lesson Progress</h5>
                    <div class="progress">
                        <div class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>
                    </div>
                    <button id="complete-lesson" class="btn btn-success btn-sm mt-2" data-level="a2" data-section="grammar" data-lesson="modal_verbs" data-completed="true">Mark as Complete</button>
                </div>
            </div>
        </div>
        
        <div class="col-md-9">
            <section id="overview" class="mb-5">
                <h2>Overview</h2>
                <p>Modal verbs (Modalverben) are helping verbs that express ability, necessity, obligation, permission, or possibility. They're essential for effective communication in German as they add nuance to your statements.</p>
                <p>In this lesson, you'll learn:</p>
                <ul>
                    <li>The six main modal verbs in German</li>
                    <li>How to conjugate modal verbs in present and past tense</li>
                    <li>The word order rules when using modal verbs</li>
                    <li>How to use each modal verb in appropriate contexts</li>
                </ul>
                <div class="alert alert-info">
                    <h5>Note:</h5>
                    <p>Modal verbs are always used with another verb in its infinitive form (at the end of the sentence).</p>
                </div>
            </section>
            
            <section id="modal-verbs-list" class="mb-5">
                <h2>The Six Modal Verbs in German</h2>
                
                <div class="table-responsive">
                    <table class="table table-bordered">
                        <thead class="table-light">
                            <tr>
                                <th>Modal Verb</th>
                                <th>English</th>
                                <th>Basic Meaning</th>
                                <th>Example</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>können</strong></td>
                                <td>can, to be able to</td>
                                <td>Ability, possibility, permission</td>
                                <td>Ich kann Deutsch sprechen. (I can speak German.)</td>
                            </tr>
                            <tr>
                                <td><strong>müssen</strong></td>
                                <td>must, to have to</td>
                                <td>Necessity, obligation</td>
                                <td>Ich muss arbeiten. (I have to work.)</td>
                            </tr>
                            <tr>
                                <td><strong>dürfen</strong></td>
                                <td>may, to be allowed to</td>
                                <td>Permission, prohibition</td>
                                <td>Darf ich fragen? (May I ask?)</td>
                            </tr>
                            <tr>
                                <td><strong>wollen</strong></td>
                                <td>to want to</td>
                                <td>Desire, intention</td>
                                <td>Ich will nach Berlin fahren. (I want to go to Berlin.)</td>
                            </tr>
                            <tr>
                                <td><strong>sollen</strong></td>
                                <td>should, ought to</td>
                                <td>Obligation, expectation, advice</td>
                                <td>Du sollst mehr lernen. (You should study more.)</td>
                            </tr>
                            <tr>
                                <td><strong>mögen</strong></td>
                                <td>to like, may</td>
                                <td>Liking, preference</td>
                                <td>Ich mag Kaffee. (I like coffee.)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="mt-4">
                    <h5>Listen to the modal verbs:</h5>
                    <div id="modal-verbs-audio-player" class="audio-player">
                        <button class="btn btn-sm btn-outline-primary play-button" onclick="playAudio('/static/audio/a2/modal_verbs_list.mp3', this)">
                            <i class="fas fa-play"></i> Listen
                        </button>
                        <div class="progress mt-2 audio-progress">
                            <div class="progress-bar" role="progressbar" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="conjugation" class="mb-5">
                <h2>Conjugation of Modal Verbs</h2>
                <p>Modal verbs are irregular in their conjugation. The singular forms (ich, du, er/sie/es) often change their vowel.</p>
                
                <div class="table-responsive">
                    <table class="table table-bordered">
                        <thead class="table-light">
                            <tr>
                                <th>Person</th>
                                <th>können (can)</th>
                                <th>müssen (must)</th>
                                <th>dürfen (may)</th>
                                <th>wollen (want)</th>
                                <th>sollen (should)</th>
                                <th>mögen (like)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>ich</td>
                                <td><strong>kann</strong></td>
                                <td><strong>muss</strong></td>
                                <td><strong>darf</strong></td>
                                <td><strong>will</strong></td>
                                <td><strong>soll</strong></td>
                                <td><strong>mag</strong></td>
                            </tr>
                            <tr>
                                <td>du</td>
                                <td><strong>kannst</strong></td>
                                <td><strong>musst</strong></td>
                                <td><strong>darfst</strong></td>
                                <td><strong>willst</strong></td>
                                <td><strong>sollst</strong></td>
                                <td><strong>magst</strong></td>
                            </tr>
                            <tr>
                                <td>er/sie/es</td>
                                <td><strong>kann</strong></td>
                                <td><strong>muss</strong></td>
                                <td><strong>darf</strong></td>
                                <td><strong>will</strong></td>
                                <td><strong>soll</strong></td>
                                <td><strong>mag</strong></td>
                            </tr>
                            <tr>
                                <td>wir</td>
                                <td><strong>können</strong></td>
                                <td><strong>müssen</strong></td>
                                <td><strong>dürfen</strong></td>
                                <td><strong>wollen</strong></td>
                                <td><strong>sollen</strong></td>
                                <td><strong>mögen</strong></td>
                            </tr>
                            <tr>
                                <td>ihr</td>
                                <td><strong>könnt</strong></td>
                                <td><strong>müsst</strong></td>
                                <td><strong>dürft</strong></td>
                                <td><strong>wollt</strong></td>
                                <td><strong>sollt</strong></td>
                                <td><strong>mögt</strong></td>
                            </tr>
                            <tr>
                                <td>sie/Sie</td>
                                <td><strong>können</strong></td>
                                <td><strong>müssen</strong></td>
                                <td><strong>dürfen</strong></td>
                                <td><strong>wollen</strong></td>
                                <td><strong>sollen</strong></td>
                                <td><strong>mögen</strong></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="alert alert-warning mt-3">
                    <h5>Important Patterns:</h5>
                    <ul>
                        <li>For all modal verbs, the <strong>ich</strong> and <strong>er/sie/es</strong> forms are identical</li>
                        <li>The plural forms (<strong>wir</strong>, <strong>sie/Sie</strong>) match the infinitive form</li>
                        <li>The vowel change happens only in the singular forms for most modal verbs</li>
                        <li>The <strong>du</strong> form gets the regular -st ending</li>
                        <li>The <strong>ihr</strong> form gets the regular -t ending</li>
                    </ul>
                </div>
                
                <div class="alert alert-info mt-3">
                    <h5>Special Case: mögen</h5>
                    <p>The verb "mögen" (to like) is slightly different from the other modal verbs. While it can function as a modal verb, it's often used as a regular verb to express liking something:</p>
                    <p>Ich <strong>mag</strong> Schokolade. (I like chocolate.)</p>
                    <p>When used as a true modal verb, it often appears in its subjunctive form "möchte" (would like to):</p>
                    <p>Ich <strong>möchte</strong> nach Berlin fahren. (I would like to go to Berlin.)</p>
                </div>
            </section>
            
            <section id="word-order" class="mb-5">
                <h2>Word Order with Modal Verbs</h2>
                <p>In German sentences with modal verbs, the modal verb is conjugated and placed in the second position (following normal German word order rules), while the main verb appears in its infinitive form at the end of the sentence.</p>
                
                <div class="card mb-4">
                    <div class="card-header">Basic Word Order</div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <h5>Main Clause Pattern:</h5>
                                <div class="alert alert-secondary">
                                    Subject + Modal Verb (conjugated) + Other Elements + Main Verb (infinitive)
                                </div>
                                <p>Examples:</p>
                                <ul>
                                    <li><strong>Ich kann</strong> gut <strong>schwimmen</strong>.<br>(I can swim well.)</li>
                                    <li><strong>Er will</strong> morgen nach Berlin <strong>fahren</strong>.<br>(He wants to go to Berlin tomorrow.)</li>
                                    <li><strong>Wir müssen</strong> früh <strong>aufstehen</strong>.<br>(We have to get up early.)</li>
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <h5>Question Pattern:</h5>
                                <div class="alert alert-secondary">
                                    Modal Verb (conjugated) + Subject + Other Elements + Main Verb (infinitive) + ?
                                </div>
                                <p>Examples:</p>
                                <ul>
                                    <li><strong>Kannst du</strong> Deutsch <strong>sprechen</strong>?<br>(Can you speak German?)</li>
                                    <li><strong>Darf ich</strong> hier <strong>parken</strong>?<br>(May I park here?)</li>
                                    <li><strong>Müsst ihr</strong> jetzt <strong>gehen</strong>?<br>(Do you have to go now?)</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card mb-4">
                    <div class="card-header">Subordinate Clauses</div>
                    <div class="card-body">
                        <p>In subordinate clauses (introduced by words like "weil", "dass", "wenn", etc.), both the modal verb and the main verb move to the end of the clause, with the modal verb coming last:</p>
                        <div class="alert alert-secondary">
                            ..., (dass/weil/etc.) + Subject + Other Elements + Main Verb (infinitive) + Modal Verb (conjugated)
                        </div>
                        <p>Examples:</p>
                        <ul>
                            <li>Ich weiß, dass er gut Deutsch <strong>sprechen kann</strong>.<br>(I know that he can speak German well.)</li>
                            <li>Sie bleibt zu Hause, weil sie arbeiten <strong>muss</strong>.<br>(She's staying home because she has to work.)</li>
                            <li>Wenn du früher <strong>kommen willst</strong>, ruf mich an.<br>(If you want to come earlier, call me.)</li>
                        </ul>
                    </div>
                </div>
            </section>
            
            <section id="past-tense" class="mb-5">
                <h2>Modal Verbs in the Past Tense</h2>
                <p>To use modal verbs in the past tense, you need to use the Präteritum (simple past) form. This is more common for modal verbs than using the Perfekt form (have + past participle).</p>
                
                <div class="table-responsive">
                    <table class="table table-bordered">
                        <thead class="table-light">
                            <tr>
                                <th>Person</th>
                                <th>können</th>
                                <th>müssen</th>
                                <th>dürfen</th>
                                <th>wollen</th>
                                <th>sollen</th>
                                <th>mögen</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>ich</td>
                                <td><strong>konnte</strong></td>
                                <td><strong>musste</strong></td>
                                <td><strong>durfte</strong></td>
                                <td><strong>wollte</strong></td>
                                <td><strong>sollte</strong></td>
                                <td><strong>mochte</strong></td>
                            </tr>
                            <tr>
                                <td>du</td>
                                <td><strong>konntest</strong></td>
                                <td><strong>musstest</strong></td>
                                <td><strong>durftest</strong></td>
                                <td><strong>wolltest</strong></td>
                                <td><strong>solltest</strong></td>
                                <td><strong>mochtest</strong></td>
                            </tr>
                            <tr>
                                <td>er/sie/es</td>
                                <td><strong>konnte</strong></td>
                                <td><strong>musste</strong></td>
                                <td><strong>durfte</strong></td>
                                <td><strong>wollte</strong></td>
                                <td><strong>sollte</strong></td>
                                <td><strong>mochte</strong></td>
                            </tr>
                            <tr>
                                <td>wir</td>
                                <td><strong>konnten</strong></td>
                                <td><strong>mussten</strong></td>
                                <td><strong>durften</strong></td>
                                <td><strong>wollten</strong></td>
                                <td><strong>sollten</strong></td>
                                <td><strong>mochten</strong></td>
                            </tr>
                            <tr>
                                <td>ihr</td>
                                <td><strong>konntet</strong></td>
                                <td><strong>musstet</strong></td>
                                <td><strong>durftet</strong></td>
                                <td><strong>wolltet</strong></td>
                                <td><strong>solltet</strong></td>
                                <td><strong>mochtet</strong></td>
                            </tr>
                            <tr>
                                <td>sie/Sie</td>
                                <td><strong>konnten</strong></td>
                                <td><strong>mussten</strong></td>
                                <td><strong>durften</strong></td>
                                <td><strong>wollten</strong></td>
                                <td><strong>sollten</strong></td>
                                <td><strong>mochten</strong></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <h5 class="mt-4">Examples in Past Tense:</h5>
                <ul>
                    <li>Ich <strong>konnte</strong> gestern nicht <strong>kommen</strong>.<br>(I couldn't come yesterday.)</li>
                    <li>Sie <strong>musste</strong> viel <strong>arbeiten</strong>.<br>(She had to work a lot.)</li>
                    <li>Wir <strong>wollten</strong> ins Kino <strong>gehen</strong>.<br>(We wanted to go to the cinema.)</li>
                    <li>Die Kinder <strong>durften</strong> nicht draußen <strong>spielen</strong>.<br>(The children were not allowed to play outside.)</li>
                </ul>
                
                <div class="alert alert-info mt-3">
                    <h5>Note:</h5>
                    <p>The word order rules for modal verbs remain the same in the past tense: the modal verb is conjugated in the Präteritum form and the main verb stays in the infinitive form at the end of the sentence.</p>
                </div>
            </section>
            
            <section id="usage-examples" class="mb-5">
                <h2>Detailed Usage of Each Modal Verb</h2>
                
                <div class="accordion" id="modalVerbUsage">
                    <div class="accordion-item">
                        <h3 class="accordion-header" id="konnenHeading">
                            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#konnenCollapse" aria-expanded="true" aria-controls="konnenCollapse">
                                können (can, to be able to)
                            </button>
                        </h3>
                        <div id="konnenCollapse" class="accordion-collapse collapse show" aria-labelledby="konnenHeading" data-bs-parent="#modalVerbUsage">
                            <div class="accordion-body">
                                <p><strong>Main uses:</strong></p>
                                <ol>
                                    <li><strong>Physical or mental ability:</strong>
                                        <ul>
                                            <li>Ich <strong>kann</strong> schwimmen. (I can swim.)</li>
                                            <li>Er <strong>kann</strong> gut kochen. (He can cook well.)</li>
                                        </ul>
                                    </li>
                                    <li><strong>Possibility:</strong>
                                        <ul>
                                            <li>Das <strong>kann</strong> heute regnen. (It might rain today.)</li>
                                            <li>Es <strong>kann</strong> sein, dass sie krank ist. (It could be that she is sick.)</li>
                                        </ul>
                                    </li>
                                    <li><strong>Permission</strong> (more informal than "dürfen"):
                                        <ul>
                                            <li>Du <strong>kannst</strong> jetzt gehen. (You can go now.)</li>
                                            <li><strong>Kann</strong> ich dir helfen? (Can I help you?)</li>
                                        </ul>
                                    </li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    
                    <div class="accordion-item">
                        <h3 class="accordion-header" id="mussenHeading">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#mussenCollapse" aria-expanded="false" aria-controls="mussenCollapse">
                                müssen (must, to have to)
                            </button>
                        </h3>
                        <div id="mussenCollapse" class="accordion-collapse collapse" aria-labelledby="mussenHeading" data-bs-parent="#modalVerbUsage">
                            <div class="accordion-body">
                                <p><strong>Main uses:</strong></p>
                                <ol>
                                    <li><strong>Necessity or obligation:</strong>
                                        <ul>
                                            <li>Ich <strong>muss</strong> arbeiten. (I have to work.)</li>
                                            <li>Wir <strong>müssen</strong> früh aufstehen. (We have to get up early.)</li>
                                        </ul>
                                    </li>
                                    <li><strong>Logical conclusion:</strong>
                                        <ul>
                                            <li>Es <strong>muss</strong> hier irgendwo sein. (It must be somewhere here.)</li>
                                            <li>Sie <strong>muss</strong> krank sein. (She must be sick.)</li>
                                        </ul>
                                    </li>
                                    <li><strong>Negation</strong> (nicht müssen = don't have to):
                                        <ul>
                                            <li>Du <strong>musst</strong> nicht kommen. (You don't have to come.)</li>
                                            <li>Wir <strong>müssen</strong> das nicht machen. (We don't have to do that.)</li>
                                        </ul>
                                    </li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    
                    <div class="accordion-item">
                        <h3 class="accordion-header" id="durfenHeading">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#durfenCollapse" aria-expanded="false" aria-controls="durfenCollapse">
                                dürfen (may, to be allowed to)
                            </button>
                        </h3>
                        <div id="durfenCollapse" class="accordion-collapse collapse" aria-labelledby="durfenHeading" data-bs-parent="#modalVerbUsage">
                            <div class="accordion-body">
                                <p><strong>Main uses:</strong></p>
                                <ol>
                                    <li><strong>Permission:</strong>
                                        <ul>
                                            <li><strong>Darf</strong> ich fragen? (May I ask?)</li>
                                            <li>Du <strong>darfst</strong> hier rauchen. (You are allowed to smoke here.)</li>
                                        </ul>
                                    </li>
                                    <li><strong>Prohibition</strong> (with negation):
                                        <ul>
                                            <li>Hier <strong>darf</strong> man nicht fotografieren. (You are not allowed to take photos here.)</li>
                                            <li>Du <strong>darfst</strong> nicht schwimmen. (You're not allowed to swim.)</li>
                                        </ul>
                                    </li>
                                    <li><strong>Polite requests:</strong>
                                        <ul>
                                            <li><strong>Darf</strong> ich Ihnen helfen? (May I help you?)</li>
                                            <li><strong>Dürfte</strong> ich Sie etwas fragen? (Might I ask you something?)</li>
                                        </ul>
                                    </li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    
                    <div class="accordion-item">
                        <h3 class="accordion-header" id="wollenHeading">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#wollenCollapse" aria-expanded="false" aria-controls="wollenCollapse">
                                wollen (to want to)
                            </button>
                        </h3>
                        <div id="wollenCollapse" class="accordion-collapse collapse" aria-labelledby="wollenHeading" data-bs-parent="#modalVerbUsage">
                            <div class="accordion-body">
                                <p><strong>Main uses:</strong></p>
                                <ol>
                                    <li><strong>Desire or intention:</strong>
                                        <ul>
                                            <li>Ich <strong>will</strong> nach Berlin fahren. (I want to go to Berlin.)</li>
                                            <li>Er <strong>will</strong> Arzt werden. (He wants to become a doctor.)</li>
                                        </ul>
                                    </li>
                                    <li><strong>Determination:</strong>
                                        <ul>
                                            <li>Ich <strong>will</strong> das schaffen! (I am determined to achieve this!)</li>
                                            <li>Sie <strong>will</strong> das Problem lösen. (She is determined to solve the problem.)</li>
                                        </ul>
                                    </li>
                                    <li><strong>Claiming</strong> (often in reported speech):
                                        <ul>
                                            <li>Er <strong>will</strong> mich nicht gesehen haben. (He claims not to have seen me.)</li>
                                            <li>Sie <strong>will</strong> nichts davon gewusst haben. (She claims to have known nothing about it.)</li>
                                        </ul>
                                    </li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    
                    <div class="accordion-item">
                        <h3 class="accordion-header" id="sollenHeading">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#sollenCollapse" aria-expanded="false" aria-controls="sollenCollapse">
                                sollen (should, ought to)
                            </button>
                        </h3>
                        <div id="sollenCollapse" class="accordion-collapse collapse" aria-labelledby="sollenHeading" data-bs-parent="#modalVerbUsage">
                            <div class="accordion-body">
                                <p><strong>Main uses:</strong></p>
                                <ol>
                                    <li><strong>Obligation or expectation:</strong>
                                        <ul>
                                            <li>Du <strong>sollst</strong> deine Hausaufgaben machen. (You should do your homework.)</li>
                                            <li>Ihr <strong>sollt</strong> pünktlich sein. (You should be punctual.)</li>
                                        </ul>
                                    </li>
                                    <li><strong>Advice or recommendation:</strong>
                                        <ul>
                                            <li>Du <strong>solltest</strong> mehr Sport treiben. (You should do more sports.)</li>
                                            <li>Man <strong>sollte</strong> gesund essen. (One should eat healthily.)</li>
                                        </ul>
                                    </li>
                                    <li><strong>Reported orders or messages:</strong>
                                        <ul>
                                            <li>Er sagt, du <strong>sollst</strong> ihn anrufen. (He says you should call him.)</li>
                                            <li>Sie <strong>soll</strong> morgen zum Chef kommen. (She is supposed to come to the boss tomorrow.)</li>
                                        </ul>
                                    </li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    
                    <div class="accordion-item">
                        <h3 class="accordion-header" id="mogenHeading">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#mogenCollapse" aria-expanded="false" aria-controls="mogenCollapse">
                                mögen (to like, may)
                            </button>
                        </h3>
                        <div id="mogenCollapse" class="accordion-collapse collapse" aria-labelledby="mogenHeading" data-bs-parent="#modalVerbUsage">
                            <div class="accordion-body">
                                <p><strong>Main uses:</strong></p>
                                <ol>
                                    <li><strong>Liking something:</strong>
                                        <ul>
                                            <li>Ich <strong>mag</strong> Schokolade. (I like chocolate.)</li>
                                            <li>Er <strong>mag</strong> klassische Musik. (He likes classical music.)</li>
                                        </ul>
                                    </li>
                                    <li><strong>As "möchte" (would like to):</strong>
                                        <ul>
                                            <li>Ich <strong>möchte</strong> einen Kaffee. (I would like a coffee.)</li>
                                            <li>Wir <strong>möchten</strong> ins Kino gehen. (We would like to go to the cinema.)</li>
                                        </ul>
                                    </li>
                                    <li><strong>Possibility</strong> (formal or literary use):
                                        <ul>
                                            <li>Es <strong>mag</strong> stimmen. (It may be true.)</li>
                                            <li>Er <strong>mag</strong> Recht haben. (He may be right.)</li>
                                        </ul>
                                    </li>
                                </ol>
                                <div class="alert alert-info">
                                    <p><strong>Note:</strong> "möchte" (would like) is technically the subjunctive form of "mögen" but is so commonly used that it functions almost like a separate modal verb for making polite requests or expressing wishes.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="practice" class="mb-5">
                <h2>Practice</h2>
                <p>Let's practice using modal verbs in different contexts:</p>
                
                <div class="card mb-4">
                    <div class="card-header">Exercise 1: Choose the correct modal verb</div>
                    <div class="card-body">
                        <form id="modal-practice">
                            <div class="mb-3">
                                <p>1. Ich ________ morgen früh aufstehen. (I have to wake up early tomorrow.)</p>
                                <select class="form-select" id="m1">
                                    <option value="">Select a modal verb...</option>
                                    <option value="incorrect">kann</option>
                                    <option value="correct">muss</option>
                                    <option value="incorrect">darf</option>
                                    <option value="incorrect">will</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <p>2. Er ________ gut Deutsch sprechen. (He can speak German well.)</p>
                                <select class="form-select" id="m2">
                                    <option value="">Select a modal verb...</option>
                                    <option value="correct">kann</option>
                                    <option value="incorrect">muss</option>
                                    <option value="incorrect">soll</option>
                                    <option value="incorrect">mag</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <p>3. ________ ich das Fenster öffnen? (May I open the window?)</p>
                                <select class="form-select" id="m3">
                                    <option value="">Select a modal verb...</option>
                                    <option value="incorrect">Soll</option>
                                    <option value="incorrect">Will</option>
                                    <option value="correct">Darf</option>
                                    <option value="incorrect">Muss</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <p>4. Wir ________ nächstes Jahr nach Berlin reisen. (We want to travel to Berlin next year.)</p>
                                <select class="form-select" id="m4">
                                    <option value="">Select a modal verb...</option>
                                    <option value="incorrect">können</option>
                                    <option value="incorrect">müssen</option>
                                    <option value="incorrect">dürfen</option>
                                    <option value="correct">wollen</option>
                                </select>
                            </div>
                            <button type="button" class="btn btn-primary" id="check-modal">Check Answers</button>
                        </form>
                        <div id="modal-result" class="mt-3"></div>
                    </div>
                </div>
                
                <div class="card mb-4">
                    <div class="card-header">Exercise 2: Form sentences with modal verbs</div>
                    <div class="card-body">
                        <form id="sentence-practice">
                            <div class="mb-3">
                                <label for="s1" class="form-label">1. Arrange the words to form a correct sentence: ich / Deutsch / lernen / will</label>
                                <input type="text" class="form-control" id="s1" placeholder="Type the correct sentence..." data-answer="Ich will Deutsch lernen.">
                            </div>
                            <div class="mb-3">
                                <label for="s2" class="form-label">2. Arrange the words to form a correct sentence: du / mir / helfen / kannst</label>
                                <input type="text" class="form-control" id="s2" placeholder="Type the correct sentence..." data-answer="Du kannst mir helfen.">
                            </div>
                            <div class="mb-3">
                                <label for="s3" class="form-label">3. Complete the sentence with the correct form of "dürfen": Die Kinder ________ nicht alleine schwimmen.</label>
                                <input type="text" class="form-control" id="s3" placeholder="Type the correct form..." data-answer="dürfen">
                            </div>
                            <div class="mb-3">
                                <label for="s4" class="form-label">4. Complete the sentence with "müssen" in the past tense: Gestern ________ ich lange arbeiten.</label>
                                <input type="text" class="form-control" id="s4" placeholder="Type the correct form..." data-answer="musste">
                            </div>
                            <button type="button" class="btn btn-primary" id="check-sentences">Check Answers</button>
                        </form>
                        <div id="sentence-result" class="mt-3"></div>
                    </div>
                </div>
                
                <div class="card mb-4">
                    <div class="card-header">Exercise 3: Translation Practice</div>
                    <div class="card-body">
                        <form id="translation-practice">
                            <div class="mb-3">
                                <label for="t1" class="form-label">1. Translate to German: "I want to learn German."</label>
                                <input type="text" class="form-control" id="t1" placeholder="Type your translation..." data-answer="Ich will Deutsch lernen.">
                            </div>
                            <div class="mb-3">
                                <label for="t2" class="form-label">2. Translate to German: "He can play the piano very well."</label>
                                <input type="text" class="form-control" id="t2" placeholder="Type your translation..." data-answer="Er kann sehr gut Klavier spielen.">
                            </div>
                            <div class="mb-3">
                                <label for="t3" class="form-label">3. Translate to German: "You should study more."</label>
                                <input type="text" class="form-control" id="t3" placeholder="Type your translation..." data-answer="Du sollst mehr lernen.">
                            </div>
                            <div class="mb-3">
                                <label for="t4" class="form-label">4. Translate to German: "May I ask a question?"</label>
                                <input type="text" class="form-control" id="t4" placeholder="Type your translation..." data-answer="Darf ich eine Frage stellen?">
                            </div>
                            <button type="button" class="btn btn-primary" id="check-translations">Check Answers</button>
                        </form>
                        <div id="translation-result" class="mt-3"></div>
                    </div>
                </div>
                
                <div class="alert alert-success">
                    <h5><i class="fas fa-check-circle"></i> Well done!</h5>
                    <p>You've completed the Modal Verbs lesson. Modal verbs are essential tools for expressing nuanced meaning in German, and mastering them will greatly improve your communication skills.</p>
                    <p>Remember the key points: modal verbs are conjugated in the second position, while the main verb goes to the end of the sentence in its infinitive form.</p>
                    <p>Ready to test your knowledge? Try the <a href="{{ url_for('quiz', level='a2', topic='modal-verbs') }}" class="alert-link">Modal Verbs Quiz</a>.</p>
                </div>
            </section>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Initialize progress tracking
        initializeProgressTracking();
        
        // Handle scrollspy for navigation
        document.querySelectorAll('.list-group-item').forEach(item => {
            if (item.getAttribute('href') && item.getAttribute('href').startsWith('#')) {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    const targetElement = document.querySelector(targetId);
                    window.scrollTo({
                        top: targetElement.offsetTop - 100,
                        behavior: 'smooth'
                    });
                });
            }
        });
        
        // Update progress bar as user scrolls through content
        const sections = document.querySelectorAll('section');
        const totalSections = sections.length;
        let completedSections = 0;
        
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const sectionIndex = Array.from(sections).indexOf(entry.target);
                    completedSections = Math.max(completedSections, sectionIndex + 1);
                    const progressPercent = Math.round((completedSections / totalSections) * 100);
                    document.querySelector('.progress-bar').style.width = progressPercent + '%';
                    document.querySelector('.progress-bar').setAttribute('aria-valuenow', progressPercent);
                    document.querySelector('.progress-bar').textContent = progressPercent + '%';
                }
            });
        }, {threshold: 0.7});
        
        sections.forEach(section => {
            observer.observe(section);
        });
        
        // Check modal verb exercise
        document.getElementById('check-modal').addEventListener('click', function() {
            const selects = document.querySelectorAll('#modal-practice select');
            let correct = 0;
            const totalQuestions = selects.length;
            
            selects.forEach(select => {
                if (select.value === 'correct') {
                    select.classList.add('is-valid');
                    select.classList.remove('is-invalid');
                    correct++;
                } else if (select.value === 'incorrect') {
                    select.classList.add('is-invalid');
                    select.classList.remove('is-valid');
                }
            });
            
            const resultDiv = document.getElementById('modal-result');
            if (correct === totalQuestions) {
                resultDiv.innerHTML = '<div class="alert alert-success">Perfect! You chose all the correct modal verbs!</div>';
            } else {
                resultDiv.innerHTML = `<div class="alert alert-info">You got ${correct} out of ${totalQuestions} correct. Keep practicing!</div>`;
            }
        });
        
        // Check sentence exercise
        document.getElementById('check-sentences').addEventListener('click', function() {
            const inputs = document.querySelectorAll('#sentence-practice input');
            let correct = 0;
            
            inputs.forEach(input => {
                const userAnswer = input.value.trim().toLowerCase();
                const correctAnswer = input.dataset.answer.toLowerCase();
                
                if (userAnswer === correctAnswer) {
                    input.classList.add('is-valid');
                    input.classList.remove('is-invalid');
                    correct++;
                } else {
                    input.classList.add('is-invalid');
                    input.classList.remove('is-valid');
                }
            });
            
            const resultDiv = document.getElementById('sentence-result');
            if (correct === inputs.length) {
                resultDiv.innerHTML = '<div class="alert alert-success">Excellent! All your answers are correct!</div>';
            } else {
                resultDiv.innerHTML = `<div class="alert alert-info">You got ${correct} out of ${inputs.length} correct. Keep practicing!</div>`;
            }
        });
        
        // Check translation exercise
        document.getElementById('check-translations').addEventListener('click', function() {
            const inputs = document.querySelectorAll('#translation-practice input');
            let correct = 0;
            
            inputs.forEach(input => {
                const userAnswer = input.value.trim().toLowerCase();
                const correctAnswer = input.dataset.answer.toLowerCase();
                
                // Allow for some variation in translations
                if (userAnswer === correctAnswer || 
                    (input.id === 't1' && (userAnswer === 'ich will deutsch lernen' || userAnswer === 'ich möchte deutsch lernen')) ||
                    (input.id === 't2' && (userAnswer === 'er kann sehr gut klavier spielen' || userAnswer === 'er kann klavier sehr gut spielen')) ||
                    (input.id === 't3' && (userAnswer === 'du sollst mehr lernen' || userAnswer === 'du solltest mehr lernen')) ||
                    (input.id === 't4' && (userAnswer === 'darf ich eine frage stellen' || userAnswer === 'darf ich fragen' || userAnswer === 'darf ich etwas fragen'))) {
                    input.classList.add('is-valid');
                    input.classList.remove('is-invalid');
                    correct++;
                } else {
                    input.classList.add('is-invalid');
                    input.classList.remove('is-valid');
                }
            });
            
            const resultDiv = document.getElementById('translation-result');
            if (correct === inputs.length) {
                resultDiv.innerHTML = '<div class="alert alert-success">Ausgezeichnet! Your translations are all correct!</div>';
            } else {
                resultDiv.innerHTML = `<div class="alert alert-info">You got ${correct} out of ${inputs.length} correct. Keep practicing your translations!</div>`;
            }
        });
    });
</script>
{% endblock %}
