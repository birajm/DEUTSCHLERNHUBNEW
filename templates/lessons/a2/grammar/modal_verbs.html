{% extends "layout.html" %}

{% block title %}A2 - Modal Verbs | DeutschLernHub{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <div class="col-lg-8 mx-auto">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="{{ url_for('index') }}">Home</a></li>
                    <li class="breadcrumb-item"><a href="{{ url_for('a2_index') }}">A2</a></li>
                    <li class="breadcrumb-item active">Modal Verbs</li>
                </ol>
            </nav>

            <div class="lesson-container">
                <div class="lesson-header card shadow-sm mb-4">
                    <div class="card-body">
                        <h1 class="lesson-title text-center">Modal Verbs</h1>
                        <p class="lead text-center">Learn to express ability, permission, obligation, and possibility in German</p>
                        
                        {% if current_user.is_authenticated %}
                        <div class="progress mb-3">
                            <div class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>
                        </div>
                        {% endif %}
                    </div>
                </div>

                <div class="lesson-content card shadow-sm mb-4">
                    <div class="card-body">
                        <section id="introduction">
                            <h2>Introduction to Modal Verbs</h2>
                            <p>Modal verbs (Modalverben) are auxiliary verbs that modify the main verb to express necessity, possibility, permission, ability, or obligation. In German, there are six main modal verbs:</p>
                            
                            <div class="row mb-4">
                                <div class="col-md-6">
                                    <div class="card h-100">
                                        <div class="card-header">The Six Modal Verbs</div>
                                        <div class="card-body">
                                            <ul class="list-unstyled">
                                                <li><strong>können</strong> - can, to be able to</li>
                                                <li><strong>müssen</strong> - must, to have to</li>
                                                <li><strong>dürfen</strong> - may, to be allowed to</li>
                                                <li><strong>sollen</strong> - should, ought to</li>
                                                <li><strong>wollen</strong> - to want to</li>
                                                <li><strong>mögen/möchten</strong> - to like/would like to</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="card h-100">
                                        <div class="card-header">Key Characteristics</div>
                                        <div class="card-body">
                                            <ul>
                                                <li>They change the <em>meaning</em> of the main verb</li>
                                                <li>They are <em>irregular</em> in conjugation</li>
                                                <li>In a sentence with a modal verb, the main verb goes to the <em>end</em> in its <em>infinitive</em> form</li>
                                                <li>Modal verbs occupy the <em>second position</em> in the sentence</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <section id="conjugation">
                            <h2>Conjugation of Modal Verbs in Present Tense</h2>
                            <p>Modal verbs have irregular conjugation patterns in the present tense. Notice that the <em>ich</em> and <em>er/sie/es</em> forms often have the same form.</p>
                            
                            <div class="table-responsive">
                                <table class="table table-bordered">
                                    <thead class="thead-light">
                                        <tr>
                                            <th>Pronoun</th>
                                            <th>können<br>(can)</th>
                                            <th>müssen<br>(must)</th>
                                            <th>dürfen<br>(may)</th>
                                            <th>sollen<br>(should)</th>
                                            <th>wollen<br>(want)</th>
                                            <th>mögen/möchten<br>(like/would like)</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>ich</td>
                                            <td>kann</td>
                                            <td>muss</td>
                                            <td>darf</td>
                                            <td>soll</td>
                                            <td>will</td>
                                            <td>mag/möchte</td>
                                        </tr>
                                        <tr>
                                            <td>du</td>
                                            <td>kannst</td>
                                            <td>musst</td>
                                            <td>darfst</td>
                                            <td>sollst</td>
                                            <td>willst</td>
                                            <td>magst/möchtest</td>
                                        </tr>
                                        <tr>
                                            <td>er/sie/es</td>
                                            <td>kann</td>
                                            <td>muss</td>
                                            <td>darf</td>
                                            <td>soll</td>
                                            <td>will</td>
                                            <td>mag/möchte</td>
                                        </tr>
                                        <tr>
                                            <td>wir</td>
                                            <td>können</td>
                                            <td>müssen</td>
                                            <td>dürfen</td>
                                            <td>sollen</td>
                                            <td>wollen</td>
                                            <td>mögen/möchten</td>
                                        </tr>
                                        <tr>
                                            <td>ihr</td>
                                            <td>könnt</td>
                                            <td>müsst</td>
                                            <td>dürft</td>
                                            <td>sollt</td>
                                            <td>wollt</td>
                                            <td>mögt/möchtet</td>
                                        </tr>
                                        <tr>
                                            <td>sie/Sie</td>
                                            <td>können</td>
                                            <td>müssen</td>
                                            <td>dürfen</td>
                                            <td>sollen</td>
                                            <td>wollen</td>
                                            <td>mögen/möchten</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <div class="alert alert-info mt-3">
                                <h5>Note:</h5>
                                <p><strong>Mögen</strong> (to like) is used differently than the other modal verbs. It's often used with nouns rather than with another verb:</p>
                                <ul>
                                    <li><em>Ich mag Kaffee.</em> (I like coffee.)</li>
                                </ul>
                                <p><strong>Möchten</strong> (would like to) is technically the subjunctive form of mögen but functions as its own modal verb for expressing polite wishes:</p>
                                <ul>
                                    <li><em>Ich möchte ein Bier, bitte.</em> (I would like a beer, please.)</li>
                                    <li><em>Ich möchte nach Berlin fahren.</em> (I would like to go to Berlin.)</li>
                                </ul>
                            </div>
                        </section>
                        
                        <section id="meanings">
                            <h2>Meanings and Uses of Modal Verbs</h2>
                            
                            <div class="card mb-4">
                                <div class="card-header">
                                    <h3 class="mb-0">können (can, to be able to)</h3>
                                </div>
                                <div class="card-body">
                                    <p><strong>Main uses:</strong></p>
                                    <ul>
                                        <li>To express ability or capability</li>
                                        <li>To express possibility</li>
                                        <li>To ask for or give permission (more informal than dürfen)</li>
                                    </ul>
                                    
                                    <p><strong>Examples:</strong></p>
                                    <ul>
                                        <li><em>Ich <strong>kann</strong> Deutsch sprechen.</em> (I can speak German.)</li>
                                        <li><em>Sie <strong>kann</strong> morgen kommen.</em> (She can come tomorrow.)</li>
                                        <li><em><strong>Kannst</strong> du mir helfen?</em> (Can you help me?)</li>
                                        <li><em>Das <strong>kann</strong> wahr sein.</em> (That could be true.)</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <div class="card mb-4">
                                <div class="card-header">
                                    <h3 class="mb-0">müssen (must, to have to)</h3>
                                </div>
                                <div class="card-body">
                                    <p><strong>Main uses:</strong></p>
                                    <ul>
                                        <li>To express necessity or obligation</li>
                                        <li>To express logical conclusion or deduction</li>
                                    </ul>
                                    
                                    <p><strong>Examples:</strong></p>
                                    <ul>
                                        <li><em>Ich <strong>muss</strong> jetzt gehen.</em> (I must go now.)</li>
                                        <li><em>Du <strong>musst</strong> deine Hausaufgaben machen.</em> (You have to do your homework.)</li>
                                        <li><em>Er <strong>muss</strong> krank sein, weil er nicht zur Arbeit gekommen ist.</em> (He must be sick because he didn't come to work.)</li>
                                    </ul>
                                    
                                    <p><strong>Negation:</strong></p>
                                    <ul>
                                        <li><em>Ich <strong>muss nicht</strong> arbeiten.</em> (I don't have to work.) - No obligation</li>
                                        <li><em>Ich <strong>darf nicht</strong> arbeiten.</em> (I'm not allowed to work.) - Prohibition</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <div class="card mb-4">
                                <div class="card-header">
                                    <h3 class="mb-0">dürfen (may, to be allowed to)</h3>
                                </div>
                                <div class="card-body">
                                    <p><strong>Main uses:</strong></p>
                                    <ul>
                                        <li>To express permission</li>
                                        <li>To express prohibition (in negative form)</li>
                                        <li>To make polite requests</li>
                                    </ul>
                                    
                                    <p><strong>Examples:</strong></p>
                                    <ul>
                                        <li><em>Ich <strong>darf</strong> heute länger aufbleiben.</em> (I am allowed to stay up later today.)</li>
                                        <li><em>Du <strong>darfst</strong> hier nicht rauchen.</em> (You are not allowed to smoke here.)</li>
                                        <li><em><strong>Darf</strong> ich Sie etwas fragen?</em> (May I ask you something?)</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <div class="card mb-4">
                                <div class="card-header">
                                    <h3 class="mb-0">sollen (should, ought to)</h3>
                                </div>
                                <div class="card-body">
                                    <p><strong>Main uses:</strong></p>
                                    <ul>
                                        <li>To express duty or obligation</li>
                                        <li>To report what someone else has said (reported speech)</li>
                                        <li>To give advice or recommendations</li>
                                        <li>To express expectations</li>
                                    </ul>
                                    
                                    <p><strong>Examples:</strong></p>
                                    <ul>
                                        <li><em>Du <strong>sollst</strong> nicht lügen.</em> (You should not lie.)</li>
                                        <li><em>Der Arzt sagt, ich <strong>soll</strong> mehr Sport treiben.</em> (The doctor says I should exercise more.)</li>
                                        <li><em><strong>Soll</strong> ich dir helfen?</em> (Should I help you?)</li>
                                        <li><em>Wir <strong>sollen</strong> um 8 Uhr dort sein.</em> (We're supposed to be there at 8 o'clock.)</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <div class="card mb-4">
                                <div class="card-header">
                                    <h3 class="mb-0">wollen (to want to)</h3>
                                </div>
                                <div class="card-body">
                                    <p><strong>Main uses:</strong></p>
                                    <ul>
                                        <li>To express wishes, desires, or intentions</li>
                                        <li>To express claims (often implying doubt)</li>
                                    </ul>
                                    
                                    <p><strong>Examples:</strong></p>
                                    <ul>
                                        <li><em>Ich <strong>will</strong> Deutsch lernen.</em> (I want to learn German.)</li>
                                        <li><em>Wir <strong>wollen</strong> nächstes Jahr nach Deutschland reisen.</em> (We want to travel to Germany next year.)</li>
                                        <li><em>Er <strong>will</strong> den Unfall nicht gesehen haben.</em> (He claims not to have seen the accident. [implying doubt])</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <div class="card mb-4">
                                <div class="card-header">
                                    <h3 class="mb-0">mögen/möchten (to like/would like to)</h3>
                                </div>
                                <div class="card-body">
                                    <p><strong>Main uses of mögen:</strong></p>
                                    <ul>
                                        <li>To express liking something (usually with nouns)</li>
                                        <li>To express possibility (in subjunctive form)</li>
                                    </ul>
                                    
                                    <p><strong>Examples of mögen:</strong></p>
                                    <ul>
                                        <li><em>Ich <strong>mag</strong> Schokolade.</em> (I like chocolate.)</li>
                                        <li><em>Er <strong>mag</strong> klassische Musik.</em> (He likes classical music.)</li>
                                    </ul>
                                    
                                    <p><strong>Main uses of möchten:</strong></p>
                                    <ul>
                                        <li>To express polite wishes or desires</li>
                                        <li>To make polite requests</li>
                                    </ul>
                                    
                                    <p><strong>Examples of möchten:</strong></p>
                                    <ul>
                                        <li><em>Ich <strong>möchte</strong> ein Glas Wasser, bitte.</em> (I would like a glass of water, please.)</li>
                                        <li><em>Wir <strong>möchten</strong> morgen ins Kino gehen.</em> (We would like to go to the cinema tomorrow.)</li>
                                        <li><em><strong>Möchtest</strong> du etwas essen?</em> (Would you like something to eat?)</li>
                                    </ul>
                                </div>
                            </div>
                        </section>
                        
                        <section id="sentence-structure">
                            <h2>Sentence Structure with Modal Verbs</h2>
                            
                            <div class="alert alert-info mb-4">
                                <h5>Basic Rule:</h5>
                                <p>In sentences with modal verbs, the conjugated modal verb takes the second position in the sentence, and the main verb in its infinitive form goes to the end of the clause.</p>
                            </div>
                            
                            <div class="row mb-4">
                                <div class="col">
                                    <div class="card">
                                        <div class="card-header">Basic Word Order</div>
                                        <div class="card-body">
                                            <p><strong>Position 1</strong> | <strong>Position 2 (Modal Verb)</strong> | <strong>Middle Field (Objects, Adverbs)</strong> | <strong>End (Main Verb)</strong></p>
                                            <p>Ich | <strong>kann</strong> | sehr gut | <strong>schwimmen</strong>.</p>
                                            <p>Er | <strong>muss</strong> | heute | <strong>arbeiten</strong>.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <h3>Examples of Different Sentence Types:</h3>
                            
                            <h4>1. Statements:</h4>
                            <ul>
                                <li><em>Ich <strong>kann</strong> Deutsch <strong>sprechen</strong>.</em> (I can speak German.)</li>
                                <li><em>Du <strong>musst</strong> jetzt <strong>gehen</strong>.</em> (You must go now.)</li>
                                <li><em>Er <strong>darf</strong> hier nicht <strong>rauchen</strong>.</em> (He is not allowed to smoke here.)</li>
                                <li><em>Wir <strong>wollen</strong> ein neues Auto <strong>kaufen</strong>.</em> (We want to buy a new car.)</li>
                            </ul>
                            
                            <h4>2. Questions:</h4>
                            <ul>
                                <li><em><strong>Kannst</strong> du mir <strong>helfen</strong>?</em> (Can you help me?)</li>
                                <li><em><strong>Muss</strong> ich das jetzt <strong>machen</strong>?</em> (Do I have to do this now?)</li>
                                <li><em><strong>Darf</strong> ich hier <strong>parken</strong>?</em> (May I park here?)</li>
                                <li><em>Warum <strong>willst</strong> du nicht <strong>kommen</strong>?</em> (Why don't you want to come?)</li>
                            </ul>
                            
                            <h4>3. Negation:</h4>
                            <ul>
                                <li><em>Ich <strong>kann</strong> nicht <strong>schwimmen</strong>.</em> (I cannot swim.)</li>
                                <li><em>Er <strong>darf</strong> nicht <strong>rauchen</strong>.</em> (He is not allowed to smoke.)</li>
                                <li><em>Wir <strong>wollen</strong> nicht <strong>warten</strong>.</em> (We don't want to wait.)</li>
                                <li><em>Sie <strong>muss</strong> heute nicht <strong>arbeiten</strong>.</em> (She doesn't have to work today.)</li>
                            </ul>
                            
                            <div class="alert alert-warning">
                                <h5>Important Note on Negation:</h5>
                                <p>In German, the negation word "nicht" usually comes <em>before</em> the infinitive verb at the end, but <em>after</em> other elements in the middle field.</p>
                                <ul>
                                    <li><em>Ich <strong>kann</strong> das Buch nicht <strong>finden</strong>.</em> (I cannot find the book.)</li>
                                    <li><em>Du <strong>sollst</strong> nicht so laut <strong>sprechen</strong>.</em> (You shouldn't speak so loudly.)</li>
                                </ul>
                            </div>
                        </section>
                        
                        <section id="modal-verbs-past-tense">
                            <h2>Modal Verbs in Past Tense (Perfekt)</h2>
                            
                            <p>When used in the past tense (Perfekt), modal verbs follow a special pattern. Instead of forming a past participle, they use the infinitive form with "haben" as the auxiliary verb. The main verb also stays in the infinitive form and goes to the end of the sentence.</p>
                            
                            <div class="alert alert-info mb-4">
                                <h5>Structure in Perfekt:</h5>
                                <p><strong>Subject + haben (conjugated) + objects/adverbs + main verb (infinitive) + modal verb (infinitive)</strong></p>
                            </div>
                            
                            <h3>Examples:</h3>
                            <ul>
                                <li><em>Ich <strong>habe</strong> Deutsch <strong>sprechen können</strong>.</em> (I was able to speak German.)</li>
                                <li><em>Du <strong>hast</strong> nicht <strong>kommen müssen</strong>.</em> (You didn't have to come.)</li>
                                <li><em>Er <strong>hat</strong> nicht <strong>rauchen dürfen</strong>.</em> (He was not allowed to smoke.)</li>
                                <li><em>Wir <strong>haben</strong> ein neues Auto <strong>kaufen wollen</strong>.</em> (We wanted to buy a new car.)</li>
                                <li><em>Sie <strong>haben</strong> nicht <strong>warten mögen</strong>.</em> (They didn't like to wait.)</li>
                            </ul>
                            
                            <div class="alert alert-warning">
                                <h5>Note:</h5>
                                <p>This construction with double infinitives at the end can be confusing at first but is extremely common in German. Keep practicing to get comfortable with it!</p>
                            </div>
                        </section>
                        
                        <section id="practice">
                            <h2>Practice Activities</h2>
                            
                            <div class="card mb-4">
                                <div class="card-header">Exercise 1: Choose the Correct Modal Verb</div>
                                <div class="card-body">
                                    <p>Select the most appropriate modal verb for each situation:</p>
                                    <ol>
                                        <li>Ich ________ gut Klavier spielen. (I can play the piano well.)</li>
                                        <li>Du ________ jetzt ins Bett gehen! (You must go to bed now!)</li>
                                        <li>Er ________ heute nicht arbeiten. (He doesn't want to work today.)</li>
                                        <li>________ ich hier parken? (May I park here?)</li>
                                        <li>Wir ________ morgen früh aufstehen. (We should get up early tomorrow.)</li>
                                    </ol>
                                    <button class="btn btn-sm btn-outline-secondary mt-2" type="button" data-toggle="collapse" data-target="#answers1">Show Answers</button>
                                    <div class="collapse" id="answers1">
                                        <div class="card card-body mt-2">
                                            <ol>
                                                <li>Ich <strong>kann</strong> gut Klavier spielen. (ability)</li>
                                                <li>Du <strong>musst</strong> jetzt ins Bett gehen! (necessity/obligation)</li>
                                                <li>Er <strong>will</strong> heute nicht arbeiten. (desire/intention)</li>
                                                <li><strong>Darf</strong> ich hier parken? (permission)</li>
                                                <li>Wir <strong>sollen</strong> morgen früh aufstehen. (expectation/recommendation)</li>
                                            </ol>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card mb-4">
                                <div class="card-header">Exercise 2: Conjugate the Modal Verbs</div>
                                <div class="card-body">
                                    <p>Complete each sentence with the correct form of the modal verb in parentheses:</p>
                                    <ol>
                                        <li>Ich ________ heute nicht arbeiten. (müssen)</li>
                                        <li>________ du Deutsch sprechen? (können)</li>
                                        <li>Er ________ ein neues Auto kaufen. (wollen)</li>
                                        <li>Wir ________ heute ins Kino gehen. (möchten)</li>
                                        <li>Ihr ________ nicht so laut sein. (dürfen)</li>
                                    </ol>
                                    <button class="btn btn-sm btn-outline-secondary mt-2" type="button" data-toggle="collapse" data-target="#answers2">Show Answers</button>
                                    <div class="collapse" id="answers2">
                                        <div class="card card-body mt-2">
                                            <ol>
                                                <li>Ich <strong>muss</strong> heute nicht arbeiten.</li>
                                                <li><strong>Kannst</strong> du Deutsch sprechen?</li>
                                                <li>Er <strong>will</strong> ein neues Auto kaufen.</li>
                                                <li>Wir <strong>möchten</strong> heute ins Kino gehen.</li>
                                                <li>Ihr <strong>dürft</strong> nicht so laut sein.</li>
                                            </ol>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card mb-4">
                                <div class="card-header">Exercise 3: Sentence Construction</div>
                                <div class="card-body">
                                    <p>Arrange the words to form correct sentences:</p>
                                    <ol>
                                        <li>können / Deutsch / sprechen / ich / gut</li>
                                        <li>müssen / jetzt / du / gehen</li>
                                        <li>dürfen / hier / nicht / rauchen / Sie</li>
                                        <li>wollen / kaufen / wir / eine Wohnung</li>
                                        <li>möchten / trinken / was / du</li>
                                    </ol>
                                    <button class="btn btn-sm btn-outline-secondary mt-2" type="button" data-toggle="collapse" data-target="#answers3">Show Answers</button>
                                    <div class="collapse" id="answers3">
                                        <div class="card card-body mt-2">
                                            <ol>
                                                <li>Ich <strong>kann</strong> gut Deutsch <strong>sprechen</strong>.</li>
                                                <li>Du <strong>musst</strong> jetzt <strong>gehen</strong>.</li>
                                                <li>Sie <strong>dürfen</strong> hier nicht <strong>rauchen</strong>.</li>
                                                <li>Wir <strong>wollen</strong> eine Wohnung <strong>kaufen</strong>.</li>
                                                <li>Was <strong>möchtest</strong> du <strong>trinken</strong>?</li>
                                            </ol>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card mb-4">
                                <div class="card-header">Exercise 4: Modal Verbs in Past Tense</div>
                                <div class="card-body">
                                    <p>Transform these sentences into the past tense (Perfekt):</p>
                                    <ol>
                                        <li>Ich kann Deutsch sprechen.</li>
                                        <li>Er will ein Buch lesen.</li>
                                        <li>Wir müssen früh aufstehen.</li>
                                        <li>Sie darf nicht fahren.</li>
                                        <li>Ich möchte ein Eis essen.</li>
                                    </ol>
                                    <button class="btn btn-sm btn-outline-secondary mt-2" type="button" data-toggle="collapse" data-target="#answers4">Show Answers</button>
                                    <div class="collapse" id="answers4">
                                        <div class="card card-body mt-2">
                                            <ol>
                                                <li>Ich <strong>habe</strong> Deutsch <strong>sprechen können</strong>.</li>
                                                <li>Er <strong>hat</strong> ein Buch <strong>lesen wollen</strong>.</li>
                                                <li>Wir <strong>haben</strong> früh <strong>aufstehen müssen</strong>.</li>
                                                <li>Sie <strong>hat</strong> nicht <strong>fahren dürfen</strong>.</li>
                                                <li>Ich <strong>habe</strong> ein Eis <strong>essen möchten/wollen</strong>.</li>
                                            </ol>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>
                        
                        <section id="common-expressions">
                            <h2>Common Expressions with Modal Verbs</h2>
                            
                            <div class="card mb-4">
                                <div class="card-header">Useful Everyday Phrases</div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <h5>With können:</h5>
                                            <ul>
                                                <li><em>Das kann sein.</em> (That could be.)</li>
                                                <li><em>Kannst du mir bitte helfen?</em> (Can you please help me?)</li>
                                                <li><em>So schnell wie möglich</em> (As quickly as possible)</li>
                                            </ul>
                                            
                                            <h5>With müssen:</h5>
                                            <ul>
                                                <li><em>Das muss so sein.</em> (It has to be that way.)</li>
                                                <li><em>Ich muss los.</em> (I have to go. [informal])</li>
                                                <li><em>Du musst aufpassen.</em> (You need to be careful.)</li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6">
                                            <h5>With dürfen:</h5>
                                            <ul>
                                                <li><em>Darf ich Sie etwas fragen?</em> (May I ask you something?)</li>
                                                <li><em>Hier darf man nicht rauchen.</em> (Smoking is not allowed here.)</li>
                                            </ul>
                                            
                                            <h5>With möchten:</h5>
                                            <ul>
                                                <li><em>Ich möchte bestellen.</em> (I would like to order.)</li>
                                                <li><em>Was möchtest du trinken?</em> (What would you like to drink?)</li>
                                                <li><em>Möchten Sie mitkommen?</em> (Would you like to come along?)</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>

                <div class="lesson-quiz card shadow-sm mb-4">
                    <div class="card-body">
                        <h2>Test Your Knowledge</h2>
                        <p class="mb-3">Ready to test what you've learned? Take our Modal Verbs quiz!</p>
                        
                        <a href="{{ url_for('quiz', level='a2', topic='modal-verbs') }}" class="btn btn-primary">Take the Quiz</a>
                    </div>
                </div>

                <div class="lesson-navigation card shadow-sm">
                    <div class="card-body d-flex justify-content-between">
                        <a href="{{ url_for('a2_grammar_past_tense') }}" class="btn btn-outline-secondary">&larr; Previous: Past Tense (Perfekt)</a>
                        <a href="{{ url_for('a2_index') }}" class="btn btn-outline-primary">Back to A2 Overview &rarr;</a>
                    </div>
                </div>
                
                {% if current_user.is_authenticated %}
                <div class="text-center mt-4">
                    <button id="markCompletedBtn" class="btn btn-success" data-level="A2" data-section="grammar" data-lesson="modal_verbs">Mark as Completed</button>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<script>
$(document).ready(function() {
    {% if current_user.is_authenticated %}
    // Check if lesson is already completed
    $.get('/api/progress/check', {
        level: 'A2',
        section: 'grammar',
        lesson: 'modal_verbs'
    }).done(function(data) {
        if (data.completed) {
            $('#markCompletedBtn').text('Completed').addClass('btn-outline-success').removeClass('btn-success').prop('disabled', true);
            $('.progress-bar').css('width', '100%').attr('aria-valuenow', 100).text('100%');
        }
    });
    
    // Mark lesson as completed
    $('#markCompletedBtn').click(function() {
        const button = $(this);
        const level = button.data('level');
        const section = button.data('section');
        const lesson = button.data('lesson');
        
        $.ajax({
            url: '/api/progress/update',
            type: 'POST',
            contentType: 'application/json',
            data: JSON.stringify({
                level: level,
                section: section,
                lesson: lesson,
                completed: true
            }),
            success: function(response) {
                button.text('Completed').addClass('btn-outline-success').removeClass('btn-success').prop('disabled', true);
                $('.progress-bar').css('width', '100%').attr('aria-valuenow', 100).text('100%');
            }
        });
    });
    {% endif %}
    
    // Enable Bootstrap tooltips
    $('[data-toggle="tooltip"]').tooltip();
    
    // Handle the collapsible sections
    $('.collapse').on('shown.bs.collapse', function() {
        $(this).prev().find('.fa-chevron-down').removeClass('fa-chevron-down').addClass('fa-chevron-up');
    });
    
    $('.collapse').on('hidden.bs.collapse', function() {
        $(this).prev().find('.fa-chevron-up').removeClass('fa-chevron-up').addClass('fa-chevron-down');
    });
});
</script>
{% endblock %}
